<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>The Equals</title>
    <style>
        /* === TEMEL STÄ°LLER === */
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');

        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: 'Roboto Mono', 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden; /* Sadece yatay scroll'u engelle */
            padding: 10px; /* Mobil iÃ§in kenar boÅŸluÄŸu */
        }

        /* Ana oyun konteyneri */
        #game-container {
            width: 95%;
            max-width: 800px;
            padding: 20px;
            border: 1px solid #333;
            background-color: rgba(26, 26, 26, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 2;
            border-radius: 10px; /* Mobil iÃ§in yuvarlatÄ±lmÄ±ÅŸ kÃ¶ÅŸeler */
        }

        /* Mobil optimizasyonlarÄ± */
        @media (max-width: 768px) {
            body {
                padding: 5px;
                font-size: 14px;
                min-height: 100vh;
                align-items: flex-start;
                padding-top: 20px;
            }
            
            #game-container {
                width: 98%;
                padding: 15px;
                margin: 0;
                max-height: 90vh;
                overflow-y: auto;
            }
            
            #story-text {
                font-size: 1em;
                line-height: 1.6;
                margin-bottom: 20px;
                word-wrap: break-word;
            }
            
            .choice-button {
                padding: 12px 15px;
                font-size: 0.9em;
                margin-bottom: 8px;
                word-wrap: break-word;
                white-space: normal;
                min-height: 44px; /* Touch target iÃ§in */
            }
            
            #logo-container {
                margin-bottom: 20px;
            }
            
            #game-logo {
                width: 60px;
                height: 60px;
            }

            #choices {
                gap: 10px;
            }
        }

        /* Ã‡ok kÃ¼Ã§Ã¼k ekranlar iÃ§in */
        @media (max-width: 480px) {
            body {
                font-size: 13px;
                padding: 3px;
                padding-top: 15px;
            }
            
            #game-container {
                padding: 10px;
                width: 99%;
                max-height: 95vh;
            }
            
            #story-text {
                font-size: 0.9em;
                line-height: 1.5;
                margin-bottom: 15px;
            }
            
            .choice-button {
                padding: 10px 12px;
                font-size: 0.85em;
                min-height: 40px;
                margin-bottom: 6px;
            }
            
            #game-logo {
                width: 50px;
                height: 50px;
            }

            #choices {
                gap: 8px;
            }
        }

        /* Landscape modu iÃ§in */
        @media (max-height: 500px) and (orientation: landscape) {
            body {
                padding: 2px;
                align-items: flex-start;
                padding-top: 5px;
            }
            
            #game-container {
                max-height: 98vh;
                padding: 8px;
            }
            
            #story-text {
                font-size: 0.85em;
                line-height: 1.4;
                margin-bottom: 10px;
            }
            
            .choice-button {
                padding: 8px 12px;
                font-size: 0.8em;
                min-height: 32px;
                margin-bottom: 4px;
            }
            
            #logo-container {
                margin-bottom: 10px;
                padding: 5px 0;
            }
            
            #game-logo {
                width: 40px;
                height: 40px;
            }
        }

        /* Ã‡ok kÃ¼Ã§Ã¼k telefonlar iÃ§in */
        @media (max-width: 360px) {
            body {
                font-size: 12px;
                padding: 2px;
            }
            
            #game-container {
                padding: 8px;
                width: 100%;
            }
            
            #story-text {
                font-size: 0.85em;
                line-height: 1.4;
                margin-bottom: 12px;
            }
            
            .choice-button {
                padding: 8px 10px;
                font-size: 0.8em;
                min-height: 36px;
                margin-bottom: 5px;
            }
            
            #game-logo {
                width: 40px;
                height: 40px;
            }

            #logo-container {
                margin-bottom: 15px;
                padding: 10px 0;
            }
        }

        /* Arka plan sistemi */
        body {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            transition: background-image 1s ease-in-out;
        }

        /* Arka plan overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1;
        }

        /* Oyun metninin alanÄ± */
        #story-text {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 30px;
            white-space: pre-wrap; /* SatÄ±r baÅŸlarÄ±nÄ± koru */
        }

        /* SeÃ§eneklerin (butonlarÄ±n) alanÄ± */
        #choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Logo Konteyneri */
        #logo-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
        }

        /* Logo Stili */
        #game-logo {
            width: 80px;
            height: 80px;
            filter: invert(1) brightness(0.8); /* Beyaz yap ve hafif karart */
            transition: all 0.3s ease;
        }

        #game-logo:hover {
            filter: invert(1) brightness(1);
            transform: scale(1.1);
        }

        /* SeÃ§enek butonlarÄ± */
        .choice-button {
            background-color: transparent;
            color: #c94a4a; /* Devrimci KÄ±rmÄ±zÄ±sÄ± */
            border: 1px solid #c94a4a;
            padding: 15px 20px;
            font-family: inherit;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
            min-height: 44px; /* Touch target iÃ§in minimum yÃ¼kseklik */
            touch-action: manipulation; /* Mobil iÃ§in touch optimizasyonu */
            -webkit-tap-highlight-color: transparent; /* iOS tap highlight'Ä± kaldÄ±r */
            position: relative;
            overflow: hidden;
        }

        .choice-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(201, 74, 74, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .choice-button:hover::before {
            left: 100%;
        }

        .choice-button:hover {
            background-color: #c94a4a;
            color: #121212;
            transform: translateX(10px) scale(1.02); /* Hafif saÄŸa kayma ve bÃ¼yÃ¼me efekti */
            box-shadow: 0 5px 15px rgba(201, 74, 74, 0.3);
        }

        .choice-button:active {
            transform: translateX(10px) scale(0.98);
        }

        /* Mobil iÃ§in touch hedefleri */
        @media (max-width: 768px) {
            .choice-button {
                touch-action: manipulation;
                -webkit-tap-highlight-color: rgba(201, 74, 74, 0.3);
                user-select: none;
                -webkit-user-select: none;
            }
            
            .choice-button:active {
                background-color: #c94a4a;
                color: #121212;
                transform: scale(0.98);
            }
        }
        
        /* === YENÄ° GELÄ°ÅžMÄ°Åž PANELLER === */
        
        /* Liderin Panosu - Stilize edilmiÅŸ stat paneli */
        #leader-board {
            position: fixed;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(26,26,26,0.95));
            border: 2px solid #c94a4a;
            padding: 15px;
            font-size: 0.85em;
            border-radius: 10px;
            max-width: 250px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(201, 74, 74, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        #leader-board:hover {
            transform: scale(1.02);
            box-shadow: 0 0 30px rgba(201, 74, 74, 0.5);
        }
        
        .stat-row {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            gap: 8px;
        }
        
        .stat-icon {
            width: 20px;
            height: 20px;
            filter: invert(1);
            opacity: 0.8;
        }
        
        .stat-label {
            font-size: 0.75em;
            font-weight: 500;
            color: #ccc;
            min-width: 60px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-bar {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }
        
        .stat-fill {
            height: 100%;
            transition: all 0.5s ease;
            border-radius: 4px;
        }
        
        .stat-fill.power { background: linear-gradient(90deg, #ff6b6b, #ee5a24); }
        .stat-fill.justice { background: linear-gradient(90deg, #74b9ff, #0984e3); }
        .stat-fill.support { background: linear-gradient(90deg, #00b894, #00a085); }
        .stat-fill.satisfaction { background: linear-gradient(90deg, #fdcb6e, #e17055); }
        .stat-fill.rebellion { background: linear-gradient(90deg, #e17055, #d63031); }
        .stat-fill.treasury { background: linear-gradient(90deg, #fdcb6e, #e17055); }
        .stat-fill.conscience { background: linear-gradient(90deg, #6c5ce7, #a29bfe); }
        
        .stat-value {
            min-width: 30px;
            text-align: right;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        /* Ä°liÅŸkiler Paneli */
        #relationships-panel {
            position: fixed;
            top: 10px;
            left: 10px;
            background: linear-gradient(135deg, rgba(0,0,0,0.9), rgba(26,26,26,0.95));
            border: 2px solid #74b9ff;
            padding: 15px;
            border-radius: 10px;
            max-width: 200px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(116, 185, 255, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            opacity: 0;
            transform: translateX(-100%);
        }
        
        #relationships-panel.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .character-card {
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
        }
        
        .character-name {
            font-weight: bold;
            color: #74b9ff;
            margin-bottom: 3px;
        }
        
        .character-status {
            font-size: 0.8em;
            opacity: 0.8;
        }
        
        .status-loyal { color: #00b894; }
        .status-angry { color: #e17055; }
        .status-enemy { color: #d63031; }
        .status-safe { color: #00b894; }
        .status-prison { color: #e17055; }
        .status-exile { color: #fdcb6e; }
        
        /* GÃ¶rsel Geribildirim Efektleri */
        .screen-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .screen-flash.rebellion {
            background: radial-gradient(circle, rgba(214, 48, 49, 0.3) 0%, transparent 70%);
        }
        
        .screen-flash.positive {
            background: radial-gradient(circle, rgba(0, 184, 148, 0.2) 0%, transparent 70%);
        }
        
        /* Gazete ManÅŸeti */
        #newspaper {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            color: #212529;
            padding: 20px;
            border-radius: 10px;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            z-index: 10000;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.8);
            transition: all 0.5s ease;
        }
        
        #newspaper.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .newspaper-header {
            font-family: 'Times New Roman', serif;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
            color: #c94a4a;
        }
        
        .newspaper-title {
            font-family: 'Times New Roman', serif;
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            line-height: 1.3;
        }
        
        .newspaper-date {
            text-align: center;
            font-size: 0.9em;
            opacity: 0.7;
            margin-bottom: 10px;
        }
        
        /* Lore Tooltip */
        .lore-tooltip {
            position: absolute;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.8em;
            max-width: 200px;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .lore-tooltip.show {
            opacity: 1;
        }
        
        /* KoÅŸullu SeÃ§enekler */
        .choice-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #666;
            color: #666;
        }
        
        .choice-button.disabled:hover {
            background-color: transparent;
            color: #666;
            transform: none;
        }
        
        .requirement-text {
            font-size: 0.8em;
            opacity: 0.7;
            font-style: italic;
            margin-top: 5px;
        }
        
        /* Rastgele Olaylar */
        .random-event {
            background: linear-gradient(135deg, rgba(201, 74, 74, 0.1), rgba(116, 185, 255, 0.1));
            border-left: 4px solid #c94a4a;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .event-title {
            font-weight: bold;
            color: #c94a4a;
            margin-bottom: 8px;
        }
        
        /* Mobil iÃ§in yeni paneller */
        @media (max-width: 768px) {
            #leader-board {
                top: 5px;
                right: 5px;
                padding: 10px;
                font-size: 0.7em;
                max-width: 180px;
            }
            
            .stat-label {
                font-size: 0.65em;
                min-width: 45px;
            }
            
            #relationships-panel {
                top: 5px;
                left: 5px;
                padding: 10px;
                max-width: 150px;
            }
            
            .stat-icon {
                width: 16px;
                height: 16px;
            }
            
            .stat-bar {
                height: 6px;
            }
            
            #newspaper {
                max-width: 90%;
                padding: 15px;
            }
        }
        
        /* Debug panel (eski) - gizli */
        #debug-panel {
            display: none;
        }
    </style>
</head>
<body>
    
    <div id="game-container">
        <div id="logo-container">
            <img src="logo.png" alt="The Equals Logo" id="game-logo">
        </div>
        <div id="story-text"></div>
        <div id="choices"></div>
    </div>

    <!-- Liderin Panosu -->
    <div id="leader-board">
        <div style="text-align: center; margin-bottom: 10px; font-weight: bold; color: #c94a4a;">LÄ°DERÄ°N PANOSU</div>
        <div class="stat-row">
            <img src="https://cdn-icons-png.flaticon.com/512/2972/2972543.png" class="stat-icon" alt="GÃ¼Ã§">
            <div class="stat-label">GÃœÃ‡</div>
            <div class="stat-bar">
                <div class="stat-fill power" id="power-fill"></div>
            </div>
            <div class="stat-value" id="power-value">0</div>
        </div>
        <div class="stat-row">
            <img src="https://cdn-icons-png.flaticon.com/512/2972/2972544.png" class="stat-icon" alt="Adalet">
            <div class="stat-label">ADALET</div>
            <div class="stat-bar">
                <div class="stat-fill justice" id="justice-fill"></div>
            </div>
            <div class="stat-value" id="justice-value">0</div>
        </div>
        <div class="stat-row">
            <img src="https://cdn-icons-png.flaticon.com/512/2972/2972545.png" class="stat-icon" alt="Halk DesteÄŸi">
            <div class="stat-label">DESTEK</div>
            <div class="stat-bar">
                <div class="stat-fill support" id="support-fill"></div>
            </div>
            <div class="stat-value" id="support-value">0</div>
        </div>
        <div class="stat-row">
            <img src="https://cdn-icons-png.flaticon.com/512/2972/2972546.png" class="stat-icon" alt="Memnuniyet">
            <div class="stat-label">MEMNUN</div>
            <div class="stat-bar">
                <div class="stat-fill satisfaction" id="satisfaction-fill"></div>
            </div>
            <div class="stat-value" id="satisfaction-value">0</div>
        </div>
        <div class="stat-row">
            <img src="https://cdn-icons-png.flaticon.com/512/2972/2972547.png" class="stat-icon" alt="Ä°syan Riski">
            <div class="stat-label">Ä°SYAN</div>
            <div class="stat-bar">
                <div class="stat-fill rebellion" id="rebellion-fill"></div>
            </div>
            <div class="stat-value" id="rebellion-value">0</div>
        </div>
        <div class="stat-row">
            <img src="https://cdn-icons-png.flaticon.com/512/2972/2972548.png" class="stat-icon" alt="Hazine">
            <div class="stat-label">HAZÄ°NE</div>
            <div class="stat-bar">
                <div class="stat-fill treasury" id="treasury-fill"></div>
            </div>
            <div class="stat-value" id="treasury-value">100</div>
        </div>
        <div class="stat-row">
            <img src="https://cdn-icons-png.flaticon.com/512/2972/2972549.png" class="stat-icon" alt="Vicdan">
            <div class="stat-label">VÄ°CDAN</div>
            <div class="stat-bar">
                <div class="stat-fill conscience" id="conscience-fill"></div>
            </div>
            <div class="stat-value" id="conscience-value">0</div>
        </div>
    </div>

    <!-- Ä°liÅŸkiler Paneli -->
    <div id="relationships-panel">
        <div style="text-align: center; margin-bottom: 10px; font-weight: bold; color: #74b9ff;">Ä°LÄ°ÅžKÄ°LER</div>
        <div id="relationships-content"></div>
    </div>

    <!-- Kontrol Paneli -->
    <div id="control-panel" style="position: fixed; bottom: 20px; left: 20px; z-index: 999; display: flex; gap: 10px;">
        <button id="save-button" style="background: rgba(0, 184, 148, 0.8); border: none; color: white; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-weight: bold;">ðŸ’¾ Kaydet</button>
        <button id="load-button" style="background: rgba(116, 185, 255, 0.8); border: none; color: white; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-weight: bold;">ðŸ“‚ YÃ¼kle</button>
        <button id="reset-button" style="background: rgba(230, 126, 34, 0.8); border: none; color: white; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-weight: bold;">ðŸ”„ SÄ±fÄ±rla</button>
    </div>

    <!-- Ä°liÅŸkiler Butonu -->
    <button id="relationships-toggle" style="position: fixed; top: 10px; left: 10px; z-index: 999; background: rgba(116, 185, 255, 0.8); border: none; color: white; padding: 8px; border-radius: 5px; cursor: pointer;">ðŸ‘¥</button>

    <!-- GÃ¶rsel Efektler -->
    <div class="screen-flash" id="screen-flash"></div>

    <!-- Gazete ManÅŸeti -->
    <div id="newspaper">
        <div class="newspaper-header">THE EQUALS GAZETESÄ°</div>
        <div class="newspaper-date" id="newspaper-date"></div>
        <div class="newspaper-title" id="newspaper-title"></div>
        <button onclick="closeNewspaper()" style="width: 100%; padding: 10px; background: #c94a4a; color: white; border: none; border-radius: 5px; cursor: pointer;">OKU</button>
    </div>

    <!-- Lore Tooltip -->
    <div class="lore-tooltip" id="lore-tooltip"></div>

    <!-- Debug panel (eski) -->
    <div id="debug-panel">
        <strong>DEBUG PANEL</strong><br>
        <span id="debug-info"></span>
    </div>

    <audio id="ambience-sound" src="https://www.myinstants.com/media/sounds/ambience-sci-fi-scary-dark-sound-effect-for-background-free-download.mp3" loop volume="0.2"></audio>

    <!-- HTML'e ekle -->
    <div id="skip-typewriter" style="display:none; position: fixed; bottom: 20px; right: 20px; z-index: 2000; background: #c94a4a; color: white; border: none; border-radius: 6px; padding: 10px 18px; font-weight: bold; font-size: 1em; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">Atla</div>

    <script>
        // === OYUN MOTORU VE VERÄ°LER ===

        // Oyunun deÄŸiÅŸkenlerini tutan obje
        const gameState = {
            perde: 1,
            bolum: 1,
            adalet_puani: 0,
            guc_puani: 0,
            halk_destegi: 0,
            halk_memnuniyeti: 0,
            isyan_riski: 0,
            hazine: 100,
            karakter_adi: "",
            secilen_yol: "", // Propaganda/Sabotaj yolu
            mÃ¼ttefik: "", // Ã–ÄŸrenci/Sendika/EntelektÃ¼el
            yoldas_durumu: "", // Eski yoldaÅŸÄ±n durumu
            secilen_strateji: "", // BarÄ±ÅŸÃ§Ä±l/Åžiddetli/Karma
            elit_cevabi: "", // Elitlerin tepkisi
            devrim_tipi: "", // KanlÄ±/BarÄ±ÅŸÃ§Ä±l/MÃ¼zakere
            yonetim_stili: "", // Demokratik/Otoriter/Pragmatik
            muhalefet_durumu: "", // BastÄ±rÄ±ldÄ±/Entegre edildi/Dinlendi
            son_catisma_secimi: "", // Son karar
            
            // YENÄ° DEÄžÄ°ÅžKENLER
            kisisel_vicdan: 0, // KiÅŸisel ahlaki durum
            dis_politika_durumu: "tarafsÄ±z", // DÄ±ÅŸ politika durumu
            teknoloji_seviyesi: 5, // Teknoloji seviyesi
            anahtar_karakterler: {
                elif: { durum: 'gÃ¼vende', iliski: 'sadÄ±k' },
                eski_yoldas: { durum: 'hayatta', iliski: 'sadÄ±k' },
                aile_uyesi: { durum: 'tehlikede', iliski: 'kÄ±rgÄ±n' }
            },
            orgut_yapisi: "", // MerkeziyetÃ§i/Yatay
            zertan_tehdidi: 0, // DÄ±ÅŸ tehdit seviyesi
            
            // YENÄ° GELÄ°ÅžMÄ°Åž DEÄžÄ°ÅžKENLER
            oyun_gunu: 1, // Oyun iÃ§i gÃ¼n sayÄ±sÄ±
            rastgele_olaylar: [], // Rastgele olaylar listesi
            gecikmeli_sonuclar: [], // Gecikmeli sonuÃ§lar
            projeler: [], // Aktif projeler
            gazete_manseetleri: [] // Gazete manÅŸetleri
        };

        // DOM elementlerini seÃ§me
        const storyTextElement = document.getElementById('story-text');
        const choicesElement = document.getElementById('choices');
        const ambienceSound = document.getElementById('ambience-sound');
        const debugInfoElement = document.getElementById('debug-info');
        
        let isSoundStarted = false;

        // Metni harf harf yazma efekti
        let typewriterSkip = false;
        function typeWriter(text, onComplete) {
            let i = 0;
            storyTextElement.innerHTML = '';
            typewriterSkip = false;
            // Atla butonunu gÃ¶ster
            const skipBtn = document.getElementById('skip-typewriter');
            skipBtn.style.display = 'block';
            skipBtn.onclick = function() {
                typewriterSkip = true;
            };
            function type() {
                if (typewriterSkip) {
                    storyTextElement.innerHTML = text;
                    skipBtn.style.display = 'none';
                    if (onComplete) onComplete();
                    return;
                }
                if (i < text.length) {
                    storyTextElement.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, 30);
                } else {
                    skipBtn.style.display = 'none';
                    if (onComplete) onComplete();
                }
            }
            type();
        }

        // === GELÄ°ÅžMÄ°Åž OYUN SÄ°STEMLERÄ° ===
        
        // Oyun durumu kaydetme sistemi
        function saveGameState() {
            const saveData = {
                gameState: gameState,
                timestamp: Date.now(),
                version: '2.1.0'
            };
            localStorage.setItem('theEquals_save', JSON.stringify(saveData));
            showNotification('Oyun durumu kaydedildi!', 'success');
        }
        
        // Oyun durumu yÃ¼kleme sistemi
        function loadGameState() {
            const saveData = localStorage.getItem('theEquals_save');
            if (saveData) {
                try {
                    const data = JSON.parse(saveData);
                    if (data.version === '2.1.0') {
                        Object.assign(gameState, data.gameState);
                        showNotification('Oyun durumu yÃ¼klendi!', 'success');
                        return true;
                    }
                } catch (e) {
                    console.error('KayÄ±t yÃ¼kleme hatasÄ±:', e);
                }
            }
            return false;
        }
        
        // Oyunu baÅŸlatan fonksiyon
        function startGame() {
            // KayÄ±tlÄ± oyun var mÄ± kontrol et
            if (loadGameState()) {
                showNode('start');
            } else {
                showNode('start');
            }
        }

        // === GELÄ°ÅžMÄ°Åž ANÄ°MASYON VE EFEKT FONKSÄ°YONLARI ===
        
        // Buton tÄ±klama animasyonu
        function animateButtonClick(button) {
            button.style.transform = 'scale(0.95)';
            button.style.transition = 'all 0.1s ease';
            setTimeout(() => {
                button.style.transform = 'scale(1)';
            }, 100);
        }
        
        // Sayfa geÃ§iÅŸ efekti
        function pageTransitionEffect() {
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(45deg, #c94a4a, #74b9ff);
                z-index: 9999;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            document.body.appendChild(overlay);
            
            setTimeout(() => overlay.style.opacity = '1', 10);
            setTimeout(() => {
                overlay.style.opacity = '0';
                setTimeout(() => overlay.remove(), 300);
            }, 300);
        }
        
        // Karakter animasyonu
        function animateCharacterAppearance() {
            const chars = document.querySelectorAll('.character-card');
            chars.forEach((char, index) => {
                char.style.opacity = '0';
                char.style.transform = 'translateX(-20px)';
                char.style.transition = 'all 0.5s ease';
                
                setTimeout(() => {
                    char.style.opacity = '1';
                    char.style.transform = 'translateX(0)';
                }, index * 200);
            });
        }
        
        // Ä°statistik gÃ¼ncelleme animasyonu
        function animateStatUpdate(statName, oldValue, newValue) {
            const statElement = document.getElementById(`${statName}-value`);
            if (!statElement) return;
            
            const diff = newValue - oldValue;
            const color = diff > 0 ? '#00b894' : diff < 0 ? '#e17055' : '#74b9ff';
            
            statElement.style.color = color;
            statElement.style.transform = 'scale(1.2)';
            statElement.style.transition = 'all 0.3s ease';
            
            setTimeout(() => {
                statElement.style.color = '#e0e0e0';
                statElement.style.transform = 'scale(1)';
            }, 1000);
        }
        
        // SeÃ§im yapÄ±ldÄ±ÄŸÄ±nda Ã§alÄ±ÅŸan fonksiyon
        function selectChoice(choice) {
            // Sesin kullanÄ±cÄ± etkileÅŸimiyle baÅŸlamasÄ±nÄ± saÄŸla
            if (!isSoundStarted) {
                ambienceSound.play();
                isSoundStarted = true;
            }
            
            // Buton animasyonu
            animateButtonClick(event.target);
            
            // KoÅŸullu seÃ§enek kontrolÃ¼
            if (!checkChoiceRequirements(choice)) {
                showNotification('Bu seÃ§enek iÃ§in yeterli kaynaÄŸÄ±nÄ±z yok!', 'error');
                return;
            }
            
            // Sayfa geÃ§iÅŸ efekti
            pageTransitionEffect();
            
            // DeÄŸiÅŸkenleri gÃ¼ncelleme
            if (choice.set) {
                for (const key in choice.set) {
                    const value = choice.set[key];
                    const oldValue = gameState[key];
                    
                    if (typeof value === 'string' && value.startsWith('it')) {
                        const change = parseInt(value.split(' ')[1]);
                        gameState[key] += change;
                        
                        // Ä°statistik animasyonu
                        if (typeof oldValue === 'number') {
                            animateStatUpdate(key, oldValue, gameState[key]);
                        }
                        
                        // GÃ¶rsel geribildirim
                        if (key === 'isyan_riski' && change > 0) {
                            showScreenFlash('rebellion');
                        } else if (key === 'halk_memnuniyeti' && change > 0) {
                            showScreenFlash('positive');
                        }
                    } else {
                        gameState[key] = value;
                    }
                }
            }
            
            // Gecikmeli sonuÃ§lar ekle
            if (choice.delayedEffects) {
                for (const effect of choice.delayedEffects) {
                    gameState.gecikmeli_sonuclar.push({
                        triggerDay: gameState.oyun_gunu + effect.delay,
                        effects: effect.effects,
                        headline: effect.headline
                    });
                }
            }
            
            // Gazete manÅŸeti gÃ¶ster
            if (choice.headline) {
                setTimeout(() => {
                    showNewspaper(choice.headline);
                }, 1000);
            }
            
            // Karakter gÃ¼ncelleme sistemi
            if (choice.characterUpdate) {
                for (const [characterName, updates] of Object.entries(choice.characterUpdate)) {
                    if (gameState.anahtar_karakterler[characterName]) {
                        Object.assign(gameState.anahtar_karakterler[characterName], updates);
                    }
                }
                // Karakter panelini gÃ¼ncelle
                setTimeout(() => updateRelationshipsPanel(), 500);
            }
            
            // Ä°sim isteme gibi Ã¶zel fonksiyonlar
            if (choice.prompt) {
                const name = prompt(choice.prompt.text);
                gameState[choice.prompt.variable] = name || "Ä°simsiz";
            }
            
            // Oyun gÃ¼nÃ¼nÃ¼ artÄ±r
            gameState.oyun_gunu++;
            
            // Otomatik kaydetme
            setTimeout(() => saveGameState(), 1000);
            
            // Rastgele olay tetikleme (%20 ÅŸans)
            if (Math.random() < 0.2) {
                triggerRandomEvent(function(eventHtml) {
                    showNode(choice.nextNode, eventHtml);
                });
            } else {
                showNode(choice.nextNode);
            }
        }

        // Arka plan deÄŸiÅŸtirme fonksiyonu
        function changeBackground(bgImage) {
            if (bgImage) {
                document.body.style.backgroundImage = `url(${bgImage})`;
            } else {
                document.body.style.backgroundImage = 'none';
            }
        }

        // Ä°lgili hikaye bÃ¶lÃ¼mÃ¼nÃ¼ (node) ekrana getiren fonksiyon
        function showNode(nodeId, extraHtml) {
            const node = storyNodes[nodeId];

            // Gecikmeli sonuÃ§larÄ± kontrol et
            checkDelayedEffects();

            // Arka planÄ± deÄŸiÅŸtir
            if (node.background) {
                changeBackground(node.background);
            }

            // Metindeki deÄŸiÅŸkenleri deÄŸiÅŸtir
            let processedText = node.text
                .replace(/{karakter_adi}/g, gameState.karakter_adi)
                .replace(/{adalet_puani}/g, gameState.adalet_puani)
                .replace(/{guc_puani}/g, gameState.guc_puani)
                .replace(/{halk_destegi}/g, gameState.halk_destegi)
                .replace(/{halk_memnuniyeti}/g, gameState.halk_memnuniyeti)
                .replace(/{isyan_riski}/g, gameState.isyan_riski)
                .replace(/{hazine}/g, gameState.hazine)
                .replace(/{kisisel_vicdan}/g, gameState.kisisel_vicdan)
                .replace(/{teknoloji_seviyesi}/g, gameState.teknoloji_seviyesi);

            typeWriter(processedText, () => {
                // Yazma bittikten sonra ekstra html (rastgele olay) ekle
                if (extraHtml) {
                    storyTextElement.innerHTML += extraHtml;
                }
                // Yazma bittikten sonra seÃ§enekleri gÃ¶ster
                while (choicesElement.firstChild) {
                    choicesElement.removeChild(choicesElement.firstChild);
                }

                if (node.choices) {
                    node.choices.forEach(choice => {
                        const button = document.createElement('button');
                        button.innerText = choice.text;
                        button.classList.add('choice-button');
                        
                        // KoÅŸullu seÃ§enek kontrolÃ¼
                        if (!checkChoiceRequirements(choice)) {
                            button.classList.add('disabled');
                            button.disabled = true;
                            
                            // Gereksinim metni ekle
                            if (choice.requirements) {
                                const reqText = document.createElement('div');
                                reqText.className = 'requirement-text';
                                reqText.textContent = `Gereksinim: ${Object.entries(choice.requirements).map(([stat, value]) => `${stat} >= ${value}`).join(', ')}`;
                                button.appendChild(reqText);
                            }
                        } else {
                            button.addEventListener('click', () => selectChoice(choice));
                        }
                        
                        choicesElement.appendChild(button);
                    });
                }
            });
            
            // Panelleri gÃ¼ncelle
            updateLeaderBoard();
            updateRelationshipsPanel();
            updateDebugPanel();
        }

        // === YENÄ° GELÄ°ÅžMÄ°Åž FONKSÄ°YONLAR ===
        
        // Liderin panosunu gÃ¼ncelleyen fonksiyon
        function updateLeaderBoard() {
            // GÃ¼Ã§ puanÄ± (0-100 arasÄ± normalize et)
            const powerPercent = Math.min(Math.max(gameState.guc_puani + 50, 0), 100);
            document.getElementById('power-fill').style.width = powerPercent + '%';
            document.getElementById('power-value').textContent = gameState.guc_puani;
            
            // Adalet puanÄ±
            const justicePercent = Math.min(Math.max(gameState.adalet_puani + 50, 0), 100);
            document.getElementById('justice-fill').style.width = justicePercent + '%';
            document.getElementById('justice-value').textContent = gameState.adalet_puani;
            
            // Halk desteÄŸi
            const supportPercent = Math.min(Math.max(gameState.halk_destegi + 50, 0), 100);
            document.getElementById('support-fill').style.width = supportPercent + '%';
            document.getElementById('support-value').textContent = gameState.halk_destegi;
            
            // Halk memnuniyeti
            const satisfactionPercent = Math.min(Math.max(gameState.halk_memnuniyeti + 50, 0), 100);
            document.getElementById('satisfaction-fill').style.width = satisfactionPercent + '%';
            document.getElementById('satisfaction-value').textContent = gameState.halk_memnuniyeti;
            
            // Ä°syan riski
            const rebellionPercent = Math.min(Math.max(gameState.isyan_riski, 0), 100);
            document.getElementById('rebellion-fill').style.width = rebellionPercent + '%';
            document.getElementById('rebellion-value').textContent = gameState.isyan_riski;
            
            // Hazine
            const treasuryPercent = Math.min(Math.max(gameState.hazine, 0), 100);
            document.getElementById('treasury-fill').style.width = treasuryPercent + '%';
            document.getElementById('treasury-value').textContent = gameState.hazine;
            
            // KiÅŸisel vicdan
            const consciencePercent = Math.min(Math.max(gameState.kisisel_vicdan + 50, 0), 100);
            document.getElementById('conscience-fill').style.width = consciencePercent + '%';
            document.getElementById('conscience-value').textContent = gameState.kisisel_vicdan;
        }
        
        // Ä°liÅŸkiler panelini gÃ¼ncelleyen fonksiyon
        function updateRelationshipsPanel() {
            const content = document.getElementById('relationships-content');
            let html = '';
            
            for (const [name, character] of Object.entries(gameState.anahtar_karakterler)) {
                const statusClass = character.iliski === 'sadÄ±k' ? 'status-loyal' : 
                                  character.iliski === 'kÄ±rgÄ±n' ? 'status-angry' : 'status-enemy';
                const statusText = character.iliski === 'sadÄ±k' ? 'SadÄ±k' : 
                                 character.iliski === 'kÄ±rgÄ±n' ? 'KÄ±rgÄ±n' : 'DÃ¼ÅŸman';
                
                const conditionClass = character.durum === 'gÃ¼vende' ? 'status-safe' : 
                                     character.durum === 'hapiste' ? 'status-prison' : 'status-exile';
                const conditionText = character.durum === 'gÃ¼vende' ? 'GÃ¼vende' : 
                                    character.durum === 'hapiste' ? 'Hapiste' : 'SÃ¼rgÃ¼nde';
                
                html += `
                    <div class="character-card">
                        <div class="character-name">${name.charAt(0).toUpperCase() + name.slice(1)}</div>
                        <div class="character-status ${statusClass}">Ä°liÅŸki: ${statusText}</div>
                        <div class="character-status ${conditionClass}">Durum: ${conditionText}</div>
                    </div>
                `;
            }
            
            content.innerHTML = html;
        }
        
        // === GELÄ°ÅžMÄ°Åž BÄ°LDÄ°RÄ°M VE EFEKT SÄ°STEMÄ° ===
        
        // Bildirim sistemi
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'error' ? '#e17055' : type === 'success' ? '#00b894' : '#74b9ff'};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 10000;
                transform: translateX(100%);
                transition: all 0.3s ease;
                max-width: 300px;
                font-weight: bold;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.style.transform = 'translateX(0)', 10);
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // GeliÅŸmiÅŸ ekran flash efekti
        function showScreenFlash(type, duration = 1000) {
            const flash = document.getElementById('screen-flash');
            flash.className = `screen-flash ${type}`;
            flash.style.opacity = '1';
            
            // Ses efekti ekle
            if (type === 'rebellion') {
                playSoundEffect('warning');
            } else if (type === 'positive') {
                playSoundEffect('success');
            }
            
            setTimeout(() => {
                flash.style.opacity = '0';
            }, duration);
        }
        
        // Ses efektleri
        function playSoundEffect(type) {
            const audio = new Audio();
            audio.volume = 0.3;
            
            const sounds = {
                'warning': 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT',
                'success': 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT'
            };
            
            if (sounds[type]) {
                audio.src = sounds[type];
                audio.play().catch(() => {}); // Ses Ã§alma hatalarÄ±nÄ± yoksay
            }
        }
        
        // Gazete manÅŸeti gÃ¶ster
        function showNewspaper(headline, date = null) {
            const newspaper = document.getElementById('newspaper');
            const title = document.getElementById('newspaper-title');
            const dateElement = document.getElementById('newspaper-date');
            
            title.textContent = headline;
            dateElement.textContent = date || `GÃ¼n ${gameState.oyun_gunu}`;
            
            newspaper.classList.add('show');
        }
        
        // Gazete manÅŸetini kapat
        function closeNewspaper() {
            document.getElementById('newspaper').classList.remove('show');
        }
        
        // Lore tooltip gÃ¶ster
        function showLoreTooltip(text, x, y) {
            const tooltip = document.getElementById('lore-tooltip');
            tooltip.textContent = text;
            tooltip.style.left = x + 'px';
            tooltip.style.top = y + 'px';
            tooltip.classList.add('show');
        }
        
        // Lore tooltip gizle
        function hideLoreTooltip() {
            document.getElementById('lore-tooltip').classList.remove('show');
        }
        
        // Rastgele olay tetikle
        function triggerRandomEvent(callback) {
            const events = [
                {
                    title: "KÄ±tlÄ±k SÃ¶ylentileri",
                    text: "Halk arasÄ±nda kÄ±tlÄ±k sÃ¶ylentileri yayÄ±lÄ±yor. Panik artÄ±yor.",
                    effects: { halk_memnuniyeti: -5 }
                },
                {
                    title: "BaÅŸarÄ±lÄ± Hasat",
                    text: "Bu yÄ±l hasat Ã§ok baÅŸarÄ±lÄ± oldu. Halk memnun.",
                    effects: { hazine: 10, halk_memnuniyeti: 5 }
                },
                {
                    title: "MÃ¼lteci AkÄ±nÄ±",
                    text: "KomÅŸu Ã¼lkeden mÃ¼lteci akÄ±nÄ± baÅŸladÄ±. Halk endiÅŸeli.",
                    effects: { halk_destegi: -5, isyan_riski: 5 }
                },
                {
                    title: "Teknoloji AtÄ±lÄ±mÄ±",
                    text: "Yerli bilim insanlarÄ± Ã¶nemli bir buluÅŸ yaptÄ±.",
                    effects: { teknoloji_seviyesi: 2 }
                },
                {
                    title: "DÄ±ÅŸ Ticaret AnlaÅŸmasÄ±",
                    text: "Zertan ile ticaret anlaÅŸmasÄ± imzalandÄ±.",
                    effects: { hazine: 20, dis_politika_durumu: 'tarafsÄ±z' }
                }
            ];
            const randomEvent = events[Math.floor(Math.random() * events.length)];
            const eventHtml = `
                <div class=\"random-event\">\n                    <div class=\"event-title\">${randomEvent.title}</div>\n                    <div>${randomEvent.text}</div>\n                </div>\n            `;
            // Efektleri uygula
            for (const [stat, change] of Object.entries(randomEvent.effects)) {
                if (typeof gameState[stat] === 'number') {
                    gameState[stat] += change;
                } else {
                    gameState[stat] = change;
                }
            }
            updateLeaderBoard();
            if (callback) callback(eventHtml);
        }
        
        // KoÅŸullu seÃ§enek kontrolÃ¼
        function checkChoiceRequirements(choice) {
            if (!choice.requirements) return true;
            
            for (const [stat, value] of Object.entries(choice.requirements)) {
                if (gameState[stat] < value) return false;
            }
            return true;
        }
        
        // Gecikmeli sonuÃ§larÄ± kontrol et
        function checkDelayedEffects() {
            const currentTime = gameState.oyun_gunu;
            const completedEffects = [];
            
            for (let i = 0; i < gameState.gecikmeli_sonuclar.length; i++) {
                const effect = gameState.gecikmeli_sonuclar[i];
                if (effect.triggerDay <= currentTime) {
                    // Efekti uygula
                    for (const [stat, change] of Object.entries(effect.effects)) {
                        gameState[stat] += change;
                    }
                    
                    // Gazete manÅŸeti gÃ¶ster
                    if (effect.headline) {
                        showNewspaper(effect.headline);
                    }
                    
                    completedEffects.push(i);
                }
            }
            
            // Tamamlanan efektleri listeden Ã§Ä±kar
            for (let i = completedEffects.length - 1; i >= 0; i--) {
                gameState.gecikmeli_sonuclar.splice(completedEffects[i], 1);
            }
        }
        
        // Debug panelini gÃ¼ncelleyen fonksiyon (eski)
        function updateDebugPanel() {
            debugInfoElement.innerHTML = `
                Ad: ${gameState.karakter_adi}<br>
                Adalet: ${gameState.adalet_puani}<br>
                GÃ¼Ã§: ${gameState.guc_puani}<br>
                Halk DesteÄŸi: ${gameState.halk_destegi}<br>
                Halk Memnuniyeti: ${gameState.halk_memnuniyeti}<br>
                Ä°syan Riski: ${gameState.isyan_riski}<br>
                Hazine: ${gameState.hazine}<br>
                KiÅŸisel Vicdan: ${gameState.kisisel_vicdan}<br>
                DÄ±ÅŸ Politika: ${gameState.dis_politika_durumu}<br>
                Teknoloji: ${gameState.teknoloji_seviyesi}
            `;
        }

        // === HÄ°KAYE VERÄ°SÄ° (JSON formatÄ±nda) ===

        const storyNodes = {
            // === BÃ–LÃœM 1.0: BAÅžLANGIÃ‡ & Ä°LK KARAR ===
            'start': {
                text: "Åžehrin kenar mahallesinde, gri beton bloklarÄ±n arasÄ±nda yaÅŸÄ±yorsun.\n\nYukarÄ±da, merkezdeki zenginlerin camdan gÃ¶kdelenleri gÃ¶kyÃ¼zÃ¼ne dikilmiÅŸ. Her sabah aynÄ± eziklikle iÅŸe gidiyorsun.\n\nBu dÃ¼zenin bir parÃ§asÄ±sÄ±n. Åžimdilik.\n\nAdÄ±n ne?",
                background: "BGs/tordah_Urban_outskirts_gray_concrete_apartment_blocks_working_9beac87a-9211-4f41-abe8-aa8b13b93e36_1.png",
                choices: [
                    {
                        text: "AdÄ±mÄ± sÃ¶yle",
                        prompt: { text: "AdÄ±n ne?", variable: "karakter_adi" },
                        nextNode: 'ilk_karar'
                    }
                ]
            },
            'ilk_karar': {
                text: "HoÅŸ geldin, {karakter_adi}.\n\nBugÃ¼n maaÅŸÄ±nÄ±n kesildiÄŸini, patronunun ise yeni bir lÃ¼ks araba aldÄ±ÄŸÄ±nÄ± Ã¶ÄŸrendin. Sokakta bir zengin Ã§ocuÄŸu sana acÄ±yarak baktÄ±.\n\nBu kÄ±rÄ±lma anÄ±nda ne yapacaksÄ±n?",
                background: "BGs/tordah_Office_building_exterior_sleek_corporate_facade_luxury_b5c5fac0-53c5-4776-af88-71ebf5cf4394_2.png",
                choices: [
                    {
                        text: "BaÅŸÄ±nÄ± eÄŸ ve bu Ã§Ã¼rÃ¼mÃ¼ÅŸ dÃ¼zende yaÅŸamaya devam et.",
                        set: { halk_destegi: 'it -5', adalet_puani: 'it -10' },
                        nextNode: 'son_sessizlik'
                    },
                    {
                        text: "Yeter artÄ±k! Ä°Ã§indeki kÄ±vÄ±lcÄ±mÄ± bir yangÄ±na dÃ¶nÃ¼ÅŸtÃ¼r.",
                        set: { halk_destegi: 'it +10', adalet_puani: 'it +15', bolum: 2 },
                        nextNode: 'ilk_direnis'
                    }
                ]
            },
            'son_sessizlik': {
                text: "BaÅŸÄ±nÄ± Ã¶ne eÄŸdin. GÃ¼venli yolu seÃ§tin. Ya da en azÄ±ndan ÅŸimdilik Ã¶yle gÃ¶rÃ¼nÃ¼yor.\n\nAma her gece o Ã§ocuÄŸun bakÄ±ÅŸlarÄ±nÄ± ve kendi sessizliÄŸinin yankÄ±sÄ±nÄ± duyacaksÄ±n.\n\nDÃ¶ngÃ¼ devam ediyor.\n\nOyun bitti.",
                background: "BGs/tordah_Indoor_office_hallway_subdued_lighting_solitary_figure_28bd36ad-c4d4-4e83-af39-b06159512f2f_3.png"
            },
            // === BÃ–LÃœM 1.1: Ä°LK DÄ°RENÄ°Åž ===
            'ilk_direnis': {
                text: "Ä°Ã§indeki Ã¶fke ve adalet ateÅŸiyle iÅŸyerine dÃ¶ndÃ¼n.\n\nSadece bir kÄ±vÄ±lcÄ±m yetecek. Ama dikkatli olmalÄ±sÄ±n. Kime gÃ¼venebilirsin?\n\nAhmet, senin gibi dÃ¼ÅŸÃ¼nen yorgun bir iÅŸÃ§i.\nMehmet ise patronun gÃ¶zdesi, bir muhbir olabilir.",
                background: "BGs/tordah_Industrial_factory_interior_workers_in_uniforms_with_c_7b0c1859-10de-4326-b715-a245569f7257_2.png",
                choices: [
                    {
                        text: "Risk al. Ahmet'le birlikte hemen kÃ¼Ã§Ã¼k bir protesto organize et.",
                        set: { guc_puani: 'it +5', halk_destegi: 'it +15' },
                        nextNode: 'orgut_yapisi_secimi'
                    },
                    {
                        text: "AklÄ±nÄ± kullan. Ã–nce Mehmet'i ikna etmeyi dene. DÃ¼ÅŸmanÄ±nÄ± dostun yap.",
                        set: { adalet_puani: 'it +10', halk_destegi: 'it +5' },
                        nextNode: 'mehmet_ikna'
                    },
                    {
                        text: "SabÄ±rlÄ± ol. Ã–nce daha fazla insanla gizlice konuÅŸ, zemin oluÅŸtur.",
                        set: { adalet_puani: 'it +5', halk_destegi: 'it +20' },
                        nextNode: 'gizli_orgutlenme'
                    }
                ]
            },
            // === Ã–RGÃœT YAPISI SEÃ‡Ä°MÄ° ===
            'orgut_yapisi_secimi': {
                text: "Ä°lk eylem baÅŸarÄ±lÄ± oldu. Åžimdi nasÄ±l Ã¶rgÃ¼tleneceksiniz?\n\nBu seÃ§im, tÃ¼m devrim sÃ¼recinizi etkileyecek.",
                background: "BGs/tordah_Secret_underground_meeting_room_dimly_lit_small_group__2a2a3ec5-0dd8-4ec4-87f3-18ce9de3249a_1.png",
                choices: [
                    {
                        text: "MerkeziyetÃ§i Ã–ncÃ¼ Parti - HÄ±zlÄ± kararlar, gÃ¼Ã§lÃ¼ liderlik",
                        set: { guc_puani: 'it +10', orgut_yapisi: 'merkeziyetÃ§i', adalet_puani: 'it -5' },
                        nextNode: 'ilk_protesto_organizasyonu'
                    },
                    {
                        text: "Yatay ve Otonom Kolektifler - Demokratik, yavaÅŸ ama gÃ¼Ã§lÃ¼ taban",
                        set: { halk_destegi: 'it +15', orgut_yapisi: 'yatay', guc_puani: 'it -5', adalet_puani: 'it +10' },
                        nextNode: 'ilk_protesto_organizasyonu'
                    }
                ]
            },
            // === YENÄ° ARA BÃ–LÃœMLER ===
            'ilk_protesto_organizasyonu': {
                text: "Ahmet ile birlikte hemen harekete geÃ§tin. Mola saatinde kÃ¼Ã§Ã¼k bir toplantÄ± yaptÄ±nÄ±z.\n\nSadece 5-6 kiÅŸi, ama bu bir baÅŸlangÄ±Ã§. Ä°lk protestonuzu nasÄ±l yapacaksÄ±nÄ±z?",
                background: "BGs/tordah_Cafeteria_break_room_workers_gathered_in_a_circle_whis_c9b73244-ddd5-4d4b-88e3-7526295bde51_2.png",
                choices: [
                    {
                        text: "Sessiz protesto - Pankartlarla iÅŸyeri Ã¶nÃ¼nde durma",
                        set: { adalet_puani: 'it +10', halk_destegi: 'it +10' },
                        nextNode: 'kivilcim_buyuyor'
                    },
                    {
                        text: "Sesli protesto - Sloganlarla dikkat Ã§ekme",
                        set: { guc_puani: 'it +10', halk_destegi: 'it +15', isyan_riski: 'it +5' },
                        nextNode: 'kivilcim_buyuyor'
                    },
                    {
                        text: "Ä°ÅŸ bÄ±rakma - KÄ±sa sÃ¼reli grev",
                        set: { guc_puani: 'it +15', halk_destegi: 'it +20', isyan_riski: 'it +10' },
                        nextNode: 'kivilcim_buyuyor'
                    }
                ]
            },
            'mehmet_ikna': {
                text: "Mehmet ile konuÅŸtun. BaÅŸta tereddÃ¼t etti, ama sonunda gerÃ§eÄŸi gÃ¶rdÃ¼.\n\nO da aynÄ± adaletsizlikleri yaÅŸÄ±yor. 'Belki de haklÄ±sÄ±n' dedi.\n\nÅžimdi Mehmet'i de yanÄ±nÄ±za alarak ne yapacaksÄ±nÄ±z?",
                background: "BGs/tordah_Industrial_factory_interior_workers_in_uniforms_with_c_7b0c1859-10de-4326-b715-a245569f7257_2.png",
                choices: [
                    {
                        text: "GÃ¼venli yaklaÅŸÄ±m - Ã–nce daha fazla kiÅŸi bul",
                        set: { adalet_puani: 'it +10', halk_destegi: 'it +10' },
                        nextNode: 'kivilcim_buyuyor'
                    },
                    {
                        text: "Cesur hamle - Mehmet'in patronla baÄŸlantÄ±sÄ±nÄ± kullan",
                        set: { guc_puani: 'it +15', halk_destegi: 'it +15', isyan_riski: 'it +10' },
                        nextNode: 'kivilcim_buyuyor'
                    },
                    {
                        text: "Stratejik plan - Ä°Ã§eriden bilgi toplama",
                        set: { adalet_puani: 'it +5', guc_puani: 'it +10', halk_destegi: 'it +15' },
                        nextNode: 'kivilcim_buyuyor'
                    }
                ]
            },
            'gizli_orgutlenme': {
                text: "SabÄ±rlÄ± bir yaklaÅŸÄ±m seÃ§tin. Ã–nce daha fazla insanla gizlice konuÅŸtun.\n\nÃ‡oÄŸu kiÅŸi aynÄ± fikirde! 20'den fazla kiÅŸi seninle aynÄ± dÃ¼ÅŸÃ¼nÃ¼yor.\n\nBu bÃ¼yÃ¼k bir baÅŸarÄ±! Åžimdi nasÄ±l Ã¶rgÃ¼tleneceksiniz?",
                background: "BGs/tordah_Secret_underground_meeting_room_dimly_lit_small_group__2a2a3ec5-0dd8-4ec4-87f3-18ce9de3249a_1.png",
                choices: [
                    {
                        text: "YeraltÄ± Ã¶rgÃ¼tÃ¼ - Gizli toplantÄ±lar ve planlar",
                        set: { adalet_puani: 'it +15', halk_destegi: 'it +20' },
                        nextNode: 'kivilcim_buyuyor'
                    },
                    {
                        text: "AÃ§Ä±k hareket - Herkesi bilgilendirerek bÃ¼yÃ¼t",
                        set: { halk_destegi: 'it +25', isyan_riski: 'it +15' },
                        nextNode: 'kivilcim_buyuyor'
                    },
                    {
                        text: "Karma strateji - Hem gizli hem aÃ§Ä±k Ã§alÄ±ÅŸ",
                        set: { adalet_puani: 'it +10', guc_puani: 'it +10', halk_destegi: 'it +15' },
                        nextNode: 'kivilcim_buyuyor'
                    }
                ]
            },
            // === BÃ–LÃœM 1.2: KIVILCIM BÃœYÃœYOR ===
            'kivilcim_buyuyor': {
                text: "KÃ¼Ã§Ã¼k grup, ilk ses getiren eylemini planlÄ±yor. AmaÃ§ dikkat Ã§ekmek mi, yoksa kaynak toplamak mÄ±?",
                background: "BGs/tordah_Activist_headquarters_maps_and_strategy_boards_passion_54439e8a-7feb-4d17-b0bd-12393032b32d_2.png",
                choices: [
                    {
                        text: "Propaganda Eylemi - Pankart asmak, yayÄ±n yapmak",
                        set: { halk_destegi: 'it +10', adalet_puani: 'it +10', secilen_yol: 'propaganda' },
                        nextNode: 'propaganda_eylemi'
                    },
                    {
                        text: "Sabotaj Eylemi - Elitlere ait bir fabrikanÄ±n Ã¼retimini durdurmak",
                        set: { guc_puani: 'it +15', isyan_riski: 'it +10', secilen_yol: 'sabotaj' },
                        nextNode: 'sabotaj_eylemi'
                    }
                ]
            },
            'propaganda_eylemi': {
                text: "Propaganda eylemi seÃ§tin. Pankartlar hazÄ±rladÄ±nÄ±z ve yayÄ±nlar yaptÄ±nÄ±z.\n\nHalk arasÄ±nda ses getirdiniz. BazÄ±larÄ± destekliyor, bazÄ±larÄ± korkuyor.\n\nBu baÅŸarÄ±yÄ± nasÄ±l sÃ¼rdÃ¼receksiniz?",
                background: "BGs/tordah_Outdoor_street_protest_crowds_holding_banners_chanting_fbbb45fe-c8-40ef-8ba4-b921471f9203_3.png",
                choices: [
                    {
                        text: "Daha fazla propaganda - BroÅŸÃ¼r daÄŸÄ±tÄ±mÄ± ve konuÅŸmalar",
                        set: { halk_destegi: 'it +15', adalet_puani: 'it +10' },
                        nextNode: 'mÃ¼ttefikler'
                    },
                    {
                        text: "Sosyal medya kampanyasÄ± - Dijital propaganda",
                        set: { halk_destegi: 'it +20', isyan_riski: 'it +5' },
                        nextNode: 'mÃ¼ttefikler'
                    },
                    {
                        text: "Yerel liderlerle gÃ¶rÃ¼ÅŸme - Topluluk desteÄŸi",
                        set: { adalet_puani: 'it +15', halk_destegi: 'it +10' },
                        nextNode: 'mÃ¼ttefikler'
                    }
                ]
            },
            'sabotaj_eylemi': {
                text: "Sabotaj eylemi seÃ§tin. Zenginlere ait bir fabrikanÄ±n Ã¼retimini durdurdunuz.\n\nBu dikkat Ã§ekti ama riskli bir hamle. Zenginler tepki verecek.\n\nBu durumu nasÄ±l yÃ¶neteceksiniz?",
                background: "BGs/tordah_Industrial_factory_interior_workers_in_uniforms_with_c_7b0c1859-10de-4326-b715-a245569f7257_2.png",
                choices: [
                    {
                        text: "Gizlenme - KimliÄŸi gizli tut, kaÃ§",
                        set: { guc_puani: 'it +10', isyan_riski: 'it +5' },
                        nextNode: 'mÃ¼ttefikler'
                    },
                    {
                        text: "Sahiplenme - Eylemi Ã¼stlen, kahraman ol",
                        set: { guc_puani: 'it +20', halk_destegi: 'it +15', isyan_riski: 'it +15' },
                        nextNode: 'mÃ¼ttefikler'
                    },
                    {
                        text: "Stratejik geri Ã§ekilme - Zaman kazan",
                        set: { adalet_puani: 'it +5', guc_puani: 'it +5' },
                        nextNode: 'mÃ¼ttefikler'
                    }
                ]
            },
            // === BÃ–LÃœM 1.3: MÃœTTEFÄ°KLER ===
            'mÃ¼ttefikler': {
                text: "Hareket bÃ¼yÃ¼dÃ¼ ve diÄŸer gruplarÄ±n dikkatini Ã§ekti. Kiminle ittifak kuracaksÄ±n?",
                background: "BGs/tordah_Diverse_group_of_activists_in_a_grand_hall_shaking_han_4c9953bf-212a-4725-9daf-495e9e1ed89c_2.png",
                choices: [
                    {
                        text: "Radikal Ã–ÄŸrenci GruplarÄ± - HÄ±zlÄ± ve etkili ama kontrol zor",
                        set: { halk_destegi: 'it +15', guc_puani: 'it +10', mÃ¼ttefik: 'Ã¶ÄŸrenci' },
                        nextNode: 'ogrenci_ittifaki'
                    },
                    {
                        text: "Pragmatik Ä°ÅŸÃ§i SendikalarÄ± - Genel grev gÃ¼cÃ¼ ama ekonomik talepleri var",
                        set: { guc_puani: 'it +20', adalet_puani: 'it -5', mÃ¼ttefik: 'sendika' },
                        nextNode: 'sendika_ittifaki'
                    },
                    {
                        text: "YavaÅŸ Ama Etkili EntelektÃ¼eller - Medya gÃ¼cÃ¼ ve uluslararasÄ± destek",
                        set: { adalet_puani: 'it +20', halk_destegi: 'it +5', mÃ¼ttefik: 'entelektÃ¼el' },
                        nextNode: 'entelektuel_ittifaki'
                    }
                ]
            },
            'entelektuel_ittifaki': {
                text: "EntelektÃ¼ellerle ittifak kurdun. Medya gÃ¼cÃ¼ ve uluslararasÄ± destek vaadi var.\n\nOnlar daha yavaÅŸ ama etkili bir yaklaÅŸÄ±m istiyor. NasÄ±l ilerleyeceksiniz?",
                background: "BGs/tordah_Elegant_academic_library_room_intellectuals_in_discuss_b79324c3-4f6a-4f6f-9729-dcdcd267c731_2.png",
                choices: [
                    {
                        text: "OnlarÄ±n stratejisini benimse - YavaÅŸ ama etkili",
                        set: { adalet_puani: 'it +20', halk_destegi: 'it +10' },
                        nextNode: 'elif_tutuklanmasi'
                    },
                    {
                        text: "HÄ±zlandÄ±r - EntelektÃ¼elleri ikna et",
                        set: { guc_puani: 'it +10', adalet_puani: 'it +10', halk_destegi: 'it +15' },
                        nextNode: 'elif_tutuklanmasi'
                    },
                    {
                        text: "Medya kampanyasÄ± - EntelektÃ¼ellerin gÃ¼cÃ¼nÃ¼ kullan",
                        set: { adalet_puani: 'it +15', halk_destegi: 'it +20' },
                        nextNode: 'elif_tutuklanmasi'
                    }
                ]
            },
            'ogrenci_ittifaki': {
                text: "Ã–ÄŸrenci gruplarÄ±yla ittifak kurdun. GenÃ§ ve enerjik, ama bazen kontrol edilmesi zor.\n\nOnlar hÄ±zlÄ± eylemler istiyor. NasÄ±l bir strateji izleyeceksiniz?",
                background: "BGs/tordah_University_quad_students_holding_signs_youthful_energy_a1c1a075-34bf-43b7-bdc8-52ef2860b7d1_2.png",
                choices: [
                    {
                        text: "OnlarÄ±n hÄ±zÄ±na ayak uydur - HÄ±zlÄ± ve agresif eylemler",
                        set: { guc_puani: 'it +15', halk_destegi: 'it +10', isyan_riski: 'it +10' },
                        nextNode: 'elif_tutuklanmasi'
                    },
                    {
                        text: "OnlarÄ± yavaÅŸlat - Daha stratejik yaklaÅŸÄ±m",
                        set: { adalet_puani: 'it +10', halk_destegi: 'it +5' },
                        nextNode: 'elif_tutuklanmasi'
                    },
                    {
                        text: "Karma strateji - Hem hÄ±zlÄ± hem dÃ¼ÅŸÃ¼nceli",
                        set: { adalet_puani: 'it +5', guc_puani: 'it +10', halk_destegi: 'it +10' },
                        nextNode: 'elif_tutuklanmasi'
                    }
                ]
            },
            'sendika_ittifaki': {
                text: "Ä°ÅŸÃ§i sendikalarÄ±yla ittifak kurdun. GÃ¼Ã§lÃ¼ ama ekonomik talepleri var.\n\nOnlar genel grev istiyor. Bu bÃ¼yÃ¼k bir hamle. NasÄ±l karÅŸÄ±lÄ±k vereceksin?",
                background: "BGs/tordah_Union_hall_room_rows_of_workers_seated_speaker_at_podi_657a3d1c-6a4e-4776-a947-b8898390292f_0.png",
                choices: [
                    {
                        text: "Genel grevi destekle - BÃ¼yÃ¼k risk, bÃ¼yÃ¼k Ã¶dÃ¼l",
                        set: { guc_puani: 'it +25', halk_destegi: 'it +20', isyan_riski: 'it +20' },
                        nextNode: 'elif_tutuklanmasi'
                    },
                    {
                        text: "Kademeli grev - Daha kontrollÃ¼ yaklaÅŸÄ±m",
                        set: { guc_puani: 'it +15', adalet_puani: 'it +10', halk_destegi: 'it +15' },
                        nextNode: 'elif_tutuklanmasi'
                    },
                    {
                        text: "Ekonomik talepleri Ã¶ncele - SendikalarÄ± memnun et",
                        set: { adalet_puani: 'it +15', halk_destegi: 'it +10' },
                        nextNode: 'elif_tutuklanmasi'
                    }
                ]
            },
            'entelektuel_ittifaki_2': {
                text: "EntelektÃ¼ellerle ittifak kurdun. Medya gÃ¼cÃ¼ ve uluslararasÄ± destek vaadi var.\n\nOnlar daha yavaÅŸ ama etkili bir yaklaÅŸÄ±m istiyor. NasÄ±l ilerleyeceksiniz?",
                background: "BGs/tordah_Elegant_academic_library_room_intellectuals_in_discuss_b79324c3-4f6a-4f6f-9729-dcdcd267c731_2.png",
                choices: [
                    {
                        text: "OnlarÄ±n stratejisini benimse - YavaÅŸ ama etkili",
                        set: { adalet_puani: 'it +20', halk_destegi: 'it +10' },
                        nextNode: 'devletin_cevabi'
                    },
                    {
                        text: "HÄ±zlandÄ±r - EntelektÃ¼elleri ikna et",
                        set: { guc_puani: 'it +10', adalet_puani: 'it +10', halk_destegi: 'it +15' },
                        nextNode: 'devletin_cevabi'
                    },
                    {
                        text: "Medya kampanyasÄ± - EntelektÃ¼ellerin gÃ¼cÃ¼nÃ¼ kullan",
                        set: { adalet_puani: 'it +15', halk_destegi: 'it +20' },
                        nextNode: 'devletin_cevabi'
                    }
                ]
            },
            // === ELÄ°F'Ä°N TUTUKLANMASI ===
            'elif_tutuklanmasi': {
                text: "Hareket bÃ¼yÃ¼dÃ¼kÃ§e, Elitler daha agresif hale geldi.\n\nBir sabah, en yakÄ±n arkadaÅŸÄ±n Elif'i 'isyana yardÄ±m ve yataklÄ±k' suÃ§lamasÄ±yla tutukladÄ±lar.\n\nElif, devrimin idealist yÃ¼zÃ¼nÃ¼ temsil ediyordu. Politikadan uzak duruyordu ama seninle aynÄ± deÄŸerleri paylaÅŸÄ±yordu.\n\nNe yapacaksÄ±n?",
                background: "BGs/tordah_Nighttime_street_police_in_riot_gear_arresting_a_defia_f9138b9a-4aff-419c-89a7-285ad43db9b6_2.png",
                choices: [
                    {
                        text: "Hareketi riske atmamak iÃ§in sessiz kal. Elif'i feda et.",
                        set: { kisisel_vicdan: 'it -15', guc_puani: 'it +5' },
                        characterUpdate: { elif: { durum: 'hapiste', iliski: 'kÄ±rgÄ±n' } },
                        nextNode: 'devletin_cevabi'
                    },
                    {
                        text: "MÃ¼ttefiklerini kullanarak Elif'i kurtarmak iÃ§in eylem dÃ¼zenle.",
                        set: { halk_destegi: 'it -10', adalet_puani: 'it +10', kisisel_vicdan: 'it +10' },
                        characterUpdate: { elif: { durum: 'kurtarÄ±ldÄ±', iliski: 'sadÄ±k' } },
                        nextNode: 'devletin_cevabi'
                    },
                    {
                        text: "Elitlerle gizli anlaÅŸma yap. Elif'i serbest bÄ±rak, sen de yavaÅŸla.",
                        set: { kisisel_vicdan: 'it +5', guc_puani: 'it -10' },
                        characterUpdate: { elif: { durum: 'gÃ¼vende', iliski: 'sadÄ±k' } },
                        nextNode: 'devletin_cevabi'
                    }
                ]
            },
            // === BÃ–LÃœM 1.4: DEVLETÄ°N CEVABI ===
            'devletin_cevabi': {
                text: "Hareketin artÄ±k gÃ¶rmezden gelinemez. Elitler karÅŸÄ±lÄ±k verir.\n\nGÃ¼venlik ÅŸefi, hareketin liderlerinden birini 'feda etmeni' karÅŸÄ±lÄ±ÄŸÄ±nda baskÄ±yÄ± azaltmayÄ± teklif eder.\n\nBu ahlaki ikilemde ne yapacaksÄ±n?",
                background: "BGs/tordah_Government_building_facade_armored_vehicles_riot_polic_579909b8-a283-4c55-bbac-8069d6e9c9ed_1.png",
                choices: [
                    {
                        text: "Teklifi reddet - TÃ¼m gÃ¼cÃ¼mÃ¼zle direneceÄŸiz!",
                        set: { isyan_riski: 'it +20', halk_destegi: 'it +15' },
                        nextNode: 'devrimin_esiginde'
                    },
                    {
                        text: "Bir yoldaÅŸÄ±nÄ± feda et - Bu savaÅŸta kurbanlar olacak.",
                        set: { guc_puani: 'it +25', adalet_puani: 'it -15' },
                        nextNode: 'devrimin_esiginde'
                    },
                    {
                        text: "Gizli anlaÅŸma - BaskÄ±yÄ± azalt, biz de yavaÅŸlayalÄ±m.",
                        set: { halk_destegi: 'it -10', adalet_puani: 'it -10', guc_puani: 'it -10' },
                        nextNode: 'devrimin_esiginde'
                    }
                ]
            },
            // === BÃ–LÃœM 1.5: DEVRÄ°MÄ°N EÅžÄ°ÄžÄ°NDE ===
            'devrimin_esiginde': {
                text: "Her ÅŸey bu ana baÄŸlÄ±. Halk sokaklarda. Saray'Ä±n kapÄ±sÄ±ndasÄ±n.\n\nSon hamle ne olacak?",
                background: "BGs/tordah_Grand_palace_gates_surrounded_by_masses_revolutionary__191ae2f4-d567-42c7-a546-c8f9a5789f0a_3.png",
                choices: [
                    {
                        text: "KanlÄ± devrim - Saray'a saldÄ±rÄ± emri ver",
                        set: { guc_puani: 'it +25', halk_destegi: 'it -10' },
                        nextNode: 'perde2_gecis'
                    },
                    {
                        text: "BarÄ±ÅŸÃ§Ä±l devrim - Milyonluk yÃ¼rÃ¼yÃ¼ÅŸle Saray'Ä± kuÅŸat",
                        set: { adalet_puani: 'it +25', halk_destegi: 'it +20' },
                        nextNode: 'perde2_gecis'
                    },
                    {
                        text: "MÃ¼zakere - Elitlerle son bir kez masaya otur",
                        set: { adalet_puani: 'it +15', guc_puani: 'it +15', halk_destegi: 'it +15' },
                        nextNode: 'perde2_gecis'
                    }
                ]
            },
            // === BÃ–LÃœM 2.0: GEÃ‡Ä°Åž - DEVRÄ°M SONRASI ===
            'perde2_gecis': {
                text: "*** DEVRÄ°M SONRASI ***\n\nDevrim baÅŸarÄ±lÄ± oldu! ArtÄ±k lÃ¼ks bir ofistesin ve bir Lider oldun.\n\nAma zaferin bedeli aÄŸÄ±r. Devrim yÃ¼zÃ¼nden tedarik zinciri koptu, hazine boÅŸ, halk aÃ§ ve sabÄ±rsÄ±z.\n\nÄ°lk bÃ¼yÃ¼k krizle karÅŸÄ± karÅŸÄ±yasÄ±n.",
                background: "BGs/tordah_Inside_opulent_government_office_officials_watching_ne_b40f4301-68c4-400b-937e-2cd4f0b1cd5f_2.png",
                choices: [
                    {
                        text: "Devam et",
                        nextNode: 'zaferin_bedeli'
                    }
                ]
            },
            // === BÃ–LÃœM 2.1: ZAFERÄ°N BEDELÄ° ===
            'zaferin_bedeli': {
                text: "Yeni hÃ¼kÃ¼metin ilk bÃ¼yÃ¼k krizi: KÄ±tlÄ±k.\n\nDevrim yÃ¼zÃ¼nden tedarik zinciri koptu. Hazine boÅŸ. Halk aÃ§ ve sabÄ±rsÄ±z.\n\nAcil Ã§Ã¶zÃ¼m ne olacak?",
                background: "BGs/tordah_Empty_supermarket_shelves_starving_citizens_queuing_ec_2f316f44-6f83-4cca-92ec-e0a7c10a05bd_2.png",
                choices: [
                    {
                        text: "Hazineyi kullan - Kalan parayla dÄ±ÅŸarÄ±dan gÄ±da al",
                        set: { hazine: 'it -40', halk_memnuniyeti: 'it +15' },
                        nextNode: 'eski_hayaletler'
                    },
                    {
                        text: "Karne sistemi - Herkese eÅŸit ama az gÄ±da",
                        set: { adalet_puani: 'it +10', halk_memnuniyeti: 'it -10' },
                        headline: "Lider {karakter_adi} Kemer SÄ±kma PolitikalarÄ±nÄ± AÃ§Ä±kladÄ±: Halk EndiÅŸeli!",
                        nextNode: 'eski_hayaletler'
                    },
                    {
                        text: "Zenginlerin mallarÄ±na el koy - Eski zenginlerin stoklarÄ±nÄ± halka daÄŸÄ±t",
                        set: { guc_puani: 'it +15', halk_memnuniyeti: 'it +20', isyan_riski: 'it +10' },
                        nextNode: 'zertan_tehdidi'
                    }
                ]
            },
            // === ZERTAN TEHDÄ°DÄ° ===
            'zertan_tehdidi': {
                text: "Devrimden sonra, komÅŸu ve gÃ¼Ã§lÃ¼ Zertan Ä°mparatorluÄŸu endiÅŸeleniyor.\n\nSÄ±nÄ±rda askeri tatbikatlara baÅŸladÄ±lar. Ãœlkedeki karÅŸÄ±-devrimci gruplara gizlice destek veriyorlar.\n\nZertan, devrimin kendi topraklarÄ±na sÄ±Ã§ramasÄ±ndan korkuyor.\n\nNasÄ±l karÅŸÄ±lÄ±k vereceksin?",
                background: "BGs/tordah_Military_checkpoint_at_border_tanks_and_troops_poised__686c54ca-b97c-4814-8f1d-207171424018_0.png",
                choices: [
                    {
                        text: "Sert Ã¼ltimatom ver. SavaÅŸ riskini gÃ¶ze al.",
                        set: { dis_politika_durumu: 'gergin', isyan_riski: 'it +10', guc_puani: 'it +15', zertan_tehdidi: 'it +20' },
                        nextNode: 'eski_hayaletler'
                    },
                    {
                        text: "Diplomasi yolunu seÃ§. Zertan'a tavizler ver.",
                        set: { dis_politika_durumu: 'tarafsÄ±z', hazine: 'it -20', adalet_puani: 'it -10', zertan_tehdidi: 'it -10' },
                        nextNode: 'eski_hayaletler'
                    },
                    {
                        text: "Teknolojiyi kullan. Siber propaganda kampanyasÄ± baÅŸlat.",
                        set: { dis_politika_durumu: 'gergin', guc_puani: 'it +10', isyan_riski: 'it -5', teknoloji_seviyesi: 'it -2', zertan_tehdidi: 'it +5' },
                        requirements: { teknoloji_seviyesi: 10 },
                        headline: "Siber SaldÄ±rÄ± SkandalÄ±: Zertan'da BÃ¼yÃ¼k Panik!",
                        nextNode: 'eski_hayaletler'
                    }
                ]
            },
            // === BÃ–LÃœM 2.2: ESKÄ° HAYALETLER ===
            'eski_hayaletler': {
                text: "Eski rejimin kalÄ±ntÄ±larÄ± hala devlette. BÃ¼rokrasi reformlarÄ±nÄ± sabote ediyor.\n\nBÃ¼rokrasiyi nasÄ±l temizleyeceksin?",
                background: "BGs/tordah_Grand_bureaucratic_office_with_ghostly_figures_of_past_e09cc08b-8a24-47df-a173-58ecd55e9bc9_2.png",
                choices: [
                    {
                        text: "Tasfiye - Sana sadÄ±k olmayanlarÄ± temizle",
                        set: { guc_puani: 'it +20', isyan_riski: 'it +15' },
                        headline: "Devlette BÃ¼yÃ¼k Temizlik: Kahraman mÄ±, DiktatÃ¶r mÃ¼?",
                        delayedEffects: [{
                            delay: 3,
                            effects: { isyan_riski: 10 },
                            headline: "SadÄ±k Kadrolar ArasÄ±nda Huzursuzluk ArtÄ±yor!"
                        }],
                        nextNode: 'yoldaslar_arasinda_catlak'
                    },
                    {
                        text: "Liyakat - Herkesi sÄ±nava tabi tut, en iyisi kalsÄ±n",
                        set: { adalet_puani: 'it +20', hazine: 'it -20' },
                        nextNode: 'yoldaslar_arasinda_catlak'
                    },
                    {
                        text: "UzlaÅŸma - Eski bÃ¼rokratlarla anlaÅŸ",
                        set: { guc_puani: 'it -5', adalet_puani: 'it -5' },
                        nextNode: 'yoldaslar_arasinda_catlak'
                    }
                ]
            },
            // === BÃ–LÃœM 2.3: YOLDAÅžLAR ARASINDA Ã‡ATLAK ===
            'yoldaslar_arasinda_catlak': {
                text: "Devrimi birlikte yaptÄ±ÄŸÄ±n eski bir yoldaÅŸÄ±n, politikalarÄ±nÄ±n 'fazla yumuÅŸak' olduÄŸunu sÃ¶yleyerek seni halka aÃ§Ä±k ÅŸekilde eleÅŸtiriyor.\n\nEski dostuna ne yapacaksÄ±n?",
                background: "BGs/tordah_Group_of_revolutionaries_arguing_heatedly_in_a_worn-do_d5a80d38-ed86-4a37-9265-5558f0543bf0_1.png",
                choices: [
                    {
                        text: "Onu dinle - PolitikalarÄ±nÄ± sertleÅŸtir",
                        set: { guc_puani: 'it +10', halk_memnuniyeti: 'it -10', yoldas_durumu: 'radikal' },
                        nextNode: 'elif_elestirisi'
                    },
                    {
                        text: "Onu gÃ¶revden al - Otoritene meydan okuyamaz",
                        set: { guc_puani: 'it +15', isyan_riski: 'it +10', yoldas_durumu: 'muhalif' },
                        nextNode: 'elif_elestirisi'
                    },
                    {
                        text: "Onu sÃ¼rgÃ¼ne gÃ¶nder - TartÄ±ÅŸmalÄ± ama kansÄ±z Ã§Ã¶zÃ¼m",
                        set: { adalet_puani: 'it -10', yoldas_durumu: 'sÃ¼rgÃ¼n' },
                        nextNode: 'elif_elestirisi'
                    }
                ]
            },
            // === ELÄ°F'Ä°N ELEÅžTÄ°RÄ°SÄ° ===
            'elif_elestirisi': {
                text: "Elif, senin lider olarak aldÄ±ÄŸÄ±n sert kararlarÄ± eleÅŸtiriyor.\n\n'Bu devrim deÄŸil, {karakter_adi}. Sen de onlar gibi oldun. Karne sistemi, tasfiyeler... Halk aÃ§ ve korkuyor.'\n\nElif'in sÃ¶zleri doÄŸru. Ama gÃ¼Ã§ kaybetmek istemiyorsun.\n\nNe yapacaksÄ±n?",
                background: "BGs/tordah_Intense_private_confrontation_in_dim_lit_room_one_figu_b3ae36f9-3f3f-4fad-b3c4-8341bf959fc8_3.png",
                choices: [
                    {
                        text: "Onu 'devrim karÅŸÄ±tÄ± propaganda' yapmaktan sustur.",
                        set: { guc_puani: 'it +10', kisisel_vicdan: 'it -20' },
                        characterUpdate: { elif: { iliski: 'dÃ¼ÅŸman' } },
                        nextNode: 'ilk_muhalif_sesler'
                    },
                    {
                        text: "Onu dinle ve politikalarÄ±nda yumuÅŸamaya git.",
                        set: { guc_puani: 'it -15', halk_memnuniyeti: 'it +10', kisisel_vicdan: 'it +15' },
                        characterUpdate: { elif: { iliski: 'sadÄ±k' } },
                        nextNode: 'ilk_muhalif_sesler'
                    },
                    {
                        text: "Onu gÃ¶revlendir. EleÅŸtirilerini sistem iÃ§inde yapsÄ±n.",
                        set: { adalet_puani: 'it +10', kisisel_vicdan: 'it +5' },
                        characterUpdate: { elif: { iliski: 'sadÄ±k' } },
                        nextNode: 'ilk_muhalif_sesler'
                    }
                ]
            },
            // === BÃ–LÃœM 2.4: Ä°LK MUHALÄ°F SESLER ===
            'ilk_muhalif_sesler': {
                text: "Bir grup genÃ§, senin zamanÄ±nda kullandÄ±ÄŸÄ±n yÃ¶ntemlerle protestolara baÅŸlÄ±yor.\n\nAdlarÄ±: 'GerÃ§ek EÅŸitler'.\n\nTalepleri: Senin verdiÄŸin ama tutamadÄ±ÄŸÄ±n vaatler.\n\nBu yeni isyan kÄ±vÄ±lcÄ±mÄ±na ne yapacaksÄ±n?",
                background: "BGs/tordah_Crowded_youth_rally_new_voices_rising_chanting_youth_e_3a6f606f-1171-4cb1-98d3-092092e2055d_0.png",
                choices: [
                    {
                        text: "GÃ¼venlik gÃ¼Ã§lerini gÃ¶nder - TÄ±pkÄ± eskiler gibi",
                        set: { isyan_riski: 'it +25', halk_memnuniyeti: 'it -20' },
                        nextNode: 'gucun_yalnizligi'
                    },
                    {
                        text: "Liderleriyle gÃ¶rÃ¼ÅŸ - OnlarÄ± sisteme dahil et",
                        set: { hazine: 'it -15', adalet_puani: 'it +10' },
                        nextNode: 'gucun_yalnizligi'
                    },
                    {
                        text: "Kara propaganda - OnlarÄ± 'eski rejim ajanÄ±' olarak yaftala",
                        set: { guc_puani: 'it +15', isyan_riski: 'it +15' },
                        nextNode: 'gucun_yalnizligi'
                    }
                ]
            },
            // === BÃ–LÃœM 2.5: GÃœCÃœN YALNIZLIÄžI ===
            'gucun_yalnizligi': {
                text: "ArtÄ±k ofisinde yalnÄ±zsÄ±n. VerdiÄŸin kararlar seni ideallerinden uzaklaÅŸtÄ±rdÄ±.\n\nÃœlke ya bir polis devletine, ya iflasÄ±n eÅŸiÄŸine ya da sÃ¼rekli isyanlarÄ±n olduÄŸu bir kaosa sÃ¼rÃ¼klendi.\n\nPencereden dÄ±ÅŸarÄ± bakÄ±yorsun.",
                background: "BGs/tordah_Silhouette_of_lone_leader_atop_a_throne_empty_hall_sol_ebce6dc9-2a84-41dd-b9d5-2e94430fb48f_3.png",
                choices: [
                    {
                        text: "Devam et",
                        nextNode: 'perde3_gecis'
                    }
                ]
            },
            // === BÃ–LÃœM 3.0: GEÃ‡Ä°Åž - KRÄ°Z DÃ–NEMÄ° ===
            'perde3_gecis': {
                text: "*** KRÄ°Z DÃ–NEMÄ° ***\n\nAylar geÃ§ti ve durum kritik. Eski yoldaÅŸlarÄ±n ya dÃ¼ÅŸman ya da sessiz.\n\nHalk ya korkuyor ya da nefret ediyor. Yeni bir devrimci hareket ortaya Ã§Ä±ktÄ±.\n\nTek amaÃ§: Ä°syan riskini engellemek ve iktidarÄ± korumak.",
                background: "BGs/tordah_Abandoned_council_chamber_dust_settles_decision_made_i_a06994f3-fb38-4759-8417-c990be01ef78_1.png",
                choices: [
                    {
                        text: "Devam et",
                        nextNode: 'golgedeki_lider'
                    }
                ]
            },
            // === BÃ–LÃœM 3.1: GÃ–LGEDEKÄ° LÄ°DER ===
            'golgedeki_lider': {
                text: "Ä°stihbarat ÅŸefin, yeni devrimci hareket 'GerÃ§ek EÅŸitler' hakkÄ±nda bir rapor sunuyor.\n\nBaÅŸlarÄ±nda karizmatik ve idealist yeni bir lider var. TÄ±pkÄ± senin genÃ§liÄŸin gibi.\n\nTehdidi nasÄ±l ortadan kaldÄ±rÄ±rsÄ±n?",
                background: "BGs/tordah_Intelligence_officers_around_war_room_table_watching_m_044fc08f-20f9-4c41-9c07-d9c52851a561_1.png",
                choices: [
                    {
                        text: "Tutuklama - Komplo suÃ§lamasÄ±yla lideri hapse at",
                        set: { isyan_riski: 'it +20' },
                        nextNode: 'kirilma_noktasi'
                    },
                    {
                        text: "Suikast - Sessizce ve gizlice ortadan kaldÄ±r",
                        set: { guc_puani: 'it +25', adalet_puani: 'it -20', isyan_riski: 'it -10' },
                        nextNode: 'kirilma_noktasi'
                    },
                    {
                        text: "Ä°tibarsÄ±zlaÅŸtÄ±rma - HakkÄ±nda sahte kanÄ±tlar Ã¼ret",
                        set: { isyan_riski: 'it +10' },
                        nextNode: 'kirilma_noktasi'
                    }
                ]
            },
            // === BÃ–LÃœM 3.2: KIRILMA NOKTASI ===
            'kirilma_noktasi': {
                text: "YaptÄ±ÄŸÄ±n hamleye tepki olarak Ã¼lke genelinde bÃ¼yÃ¼k bir protesto dalgasÄ± baÅŸlÄ±yor.\n\nBu, senin devriminden bile bÃ¼yÃ¼k olabilir.\n\nAna meydan, senin zamanÄ±nda yaptÄ±ÄŸÄ±n gibi, isyancÄ±lar tarafÄ±ndan doldurulmuÅŸ.\n\nBu kaos ortamÄ±nda, Zertan Ä°mparatorluÄŸu 'istikrarÄ± saÄŸlamak' bahanesiyle Ã¼lkeyi iÅŸgal etme tehdidinde bulunuyor.\n\nNe yapacaksÄ±n?",
                background: "BGs/tordah_Massive_crowds_clashing_with_security_forces_in_broad__dfe36c06-d7cb-4158-8a64-31c91cff65ee_0.png",
                choices: [
                    {
                        text: "Tam baskÄ± - Orduyu sokaÄŸa indir, sÄ±kÄ±yÃ¶netim ilan et",
                        set: { halk_memnuniyeti: 'it -30', isyan_riski: 'it +30' },
                        nextNode: 'final_ic_savas'
                    },
                    {
                        text: "Taviz - TÃ¼m taleplerini kabul et, erken seÃ§ime git",
                        set: { adalet_puani: 'it +20', halk_memnuniyeti: 'it +15' },
                        nextNode: 'final_onurlu_son'
                    },
                    {
                        text: "GÃ¶zdaÄŸÄ± - GÃ¼Ã§ gÃ¶sterisi yap ama ateÅŸ aÃ§ma emri verme",
                        set: { guc_puani: 'it +15', isyan_riski: 'it +15' },
                        nextNode: 'final_devrilme'
                    },
                    {
                        text: "Ulusal birlik - 'GerÃ§ek EÅŸitler'le birleÅŸ, dÄ±ÅŸ tehdide karÅŸÄ± diren",
                        set: { adalet_puani: 'it +25', halk_destegi: 'it +20', kisisel_vicdan: 'it +15' },
                        nextNode: 'final_ulusal_birlik'
                    },
                    {
                        text: "Zertan'dan yardÄ±m iste - Ä°syanÄ± bastÄ±r ama kukla ol",
                        set: { guc_puani: 'it +30', kisisel_vicdan: 'it -25', dis_politika_durumu: 'savaÅŸta' },
                        nextNode: 'final_kukla_lider'
                    },
                    {
                        text: "KaÃ§Ä±ÅŸ - Gizlice Ã¼lkeyi terk et",
                        set: { adalet_puani: 'it -15', guc_puani: 'it -15', halk_destegi: 'it -20' },
                        nextNode: 'final_surgun'
                    }
                ]
            },
            // === FÄ°NAL SONLAR ===
            'final_ic_savas': {
                text: "Ãœlke iÃ§ savaÅŸa sÃ¼rÃ¼kleniyor. Kaotik bir harita ekranÄ±yla oyun bitiyor.\n\nYIKIM.\n\nDÃ¶ngÃ¼ tamamlandÄ±, {karakter_adi}.\n\nPuanlarÄ±n:\nAdalet: {adalet_puani}\nGÃ¼Ã§: {guc_puani}\nHalk DesteÄŸi: {halk_destegi}\nHalk Memnuniyeti: {halk_memnuniyeti}\nÄ°syan Riski: {isyan_riski}\nHazine: {hazine}\nKiÅŸisel Vicdan: {kisisel_vicdan}",
                background: "BGs/tordah_Fragmented_nation_map_overlaid_with_conflict_zones_cha_5a487c4e-59db-4c7e-b0a4-bbf4baaae37b_1.png",
                choices: [
                    {
                        text: "Yeniden Oyna",
                        nextNode: 'start'
                    }
                ]
            },
            'final_onurlu_son': {
                text: "Ä°ktidarÄ± barÄ±ÅŸÃ§Ä±l yolla devrediyorsun. Tarihe hem bir devrimci hem de bir tiran olarak geÃ§iyorsun.\n\nÄ°RONÄ°.\n\nDÃ¶ngÃ¼ tamamlandÄ±, {karakter_adi}.\n\nPuanlarÄ±n:\nAdalet: {adalet_puani}\nGÃ¼Ã§: {guc_puani}\nHalk DesteÄŸi: {halk_destegi}\nHalk Memnuniyeti: {halk_memnuniyeti}\nÄ°syan Riski: {isyan_riski}\nHazine: {hazine}\nKiÅŸisel Vicdan: {kisisel_vicdan}",
                background: "BGs/tordah_Crowds_celebrating_peaceful_handover_of_power_in_publi_02cf515a-4164-434d-b8ec-653e28ac9495_0.png",
                choices: [
                    {
                        text: "Yeniden Oyna",
                        nextNode: 'start'
                    }
                ]
            },
            'final_devrilme': {
                text: "Ordu sana ihanet ediyor veya isyancÄ±lar Saray'Ä± basÄ±yor. TÄ±pkÄ± senin devirdiÄŸin lider gibi yakalanÄ±yorsun.\n\nDÃ–NGÃœ TAMAMLANDI.\n\nDÃ¶ngÃ¼ tamamlandÄ±, {karakter_adi}.\n\nPuanlarÄ±n:\nAdalet: {adalet_puani}\nGÃ¼Ã§: {guc_puani}\nHalk DesteÄŸi: {halk_destegi}\nHalk Memnuniyeti: {halk_memnuniyeti}\nÄ°syan Riski: {isyan_riski}\nHazine: {hazine}\nKiÅŸisel Vicdan: {kisisel_vicdan}",
                background: "BGs/tordah_Storming_of_palace_by_rebel_forces_banners_raised_mili_09bec77e-2ae3-423c-96ad-4d4e71bab268_1.png",
                choices: [
                    {
                        text: "Yeniden Oyna",
                        nextNode: 'start'
                    }
                ]
            },
            'final_surgun': {
                text: "BaÅŸka bir Ã¼lkede, haberlerden kendi devrilmeni izliyorsun.\n\nYALNIZLIK.\n\nDÃ¶ngÃ¼ tamamlandÄ±, {karakter_adi}.\n\nPuanlarÄ±n:\nAdalet: {adalet_puani}\nGÃ¼Ã§: {guc_puani}\nHalk DesteÄŸi: {halk_destegi}\nHalk Memnuniyeti: {halk_memnuniyeti}\nÄ°syan Riski: {isyan_riski}\nHazine: {hazine}\nKiÅŸisel Vicdan: {kisisel_vicdan}",
                background: "BGs/tordah_Exiled_leader_watching_homeland_on_news_screen_distant_5b13570b-163f-4000-952c-1f5257b93931_1.png",
                choices: [
                    {
                        text: "Yeniden Oyna",
                        nextNode: 'start'
                    }
                ]
            },
            'final_ulusal_birlik': {
                text: "Ulusal birlik hÃ¼kÃ¼meti kurdun. 'GerÃ§ek EÅŸitler'le birleÅŸerek dÄ±ÅŸ tehdide karÅŸÄ± direndin.\n\nGÃ¼cÃ¼nÃ¼ paylaÅŸtÄ±n ama Ã¼lkeyi kurtardÄ±n.\n\nBÄ°RLÄ°K.\n\nDÃ¶ngÃ¼ tamamlandÄ±, {karakter_adi}.\n\nPuanlarÄ±n:\nAdalet: {adalet_puani}\nGÃ¼Ã§: {guc_puani}\nHalk DesteÄŸi: {halk_destegi}\nHalk Memnuniyeti: {halk_memnuniyeti}\nÄ°syan Riski: {isyan_riski}\nHazine: {hazine}\nKiÅŸisel Vicdan: {kisisel_vicdan}",
                background: "BGs/tordah_Coalition_government_assembly_in_national_hall_diverse_f2f84f89-9242-42e8-aef3-a9a43db0168d_2.png",
                choices: [
                    {
                        text: "Yeniden Oyna",
                        nextNode: 'start'
                    }
                ]
            },
            'final_kukla_lider': {
                text: "Zertan'dan yardÄ±m istedin. Ä°syanÄ± bastÄ±rdÄ±n ama Ã¼lkeyi bir kukla devlete dÃ¶nÃ¼ÅŸtÃ¼rdÃ¼n.\n\nArtÄ±k Zertan'Ä±n kontrolÃ¼ndesin.\n\nÄ°HANET.\n\nDÃ¶ngÃ¼ tamamlandÄ±, {karakter_adi}.\n\nPuanlarÄ±n:\nAdalet: {adalet_puani}\nGÃ¼Ã§: {guc_puani}\nHalk DesteÄŸi: {halk_destegi}\nHalk Memnuniyeti: {halk_memnuniyeti}\nÄ°syan Riski: {isyan_riski}\nHazine: {hazine}\nKiÅŸisel Vicdan: {kisisel_vicdan}",
                background: "BGs/tordah_Puppet_government_ceremony_with_marionette_imagery_for_94e4a9cc-70b1-4632-a04e-6e20e3dc0b52_1.png",
                choices: [
                    {
                        text: "Yeniden Oyna",
                        nextNode: 'start'
                    }
                ]
            }
        };

        // === EVENT LISTENER'LAR ===
        
        // Ä°liÅŸkiler paneli toggle
        document.getElementById('relationships-toggle').addEventListener('click', () => {
            const panel = document.getElementById('relationships-panel');
            panel.classList.toggle('show');
        });
        
        // Kontrol paneli event listener'larÄ±
        document.getElementById('save-button').addEventListener('click', () => {
            saveGameState();
        });
        
        document.getElementById('load-button').addEventListener('click', () => {
            if (loadGameState()) {
                showNode('start');
            } else {
                showNotification('KayÄ±tlÄ± oyun bulunamadÄ±!', 'error');
            }
        });
        
        document.getElementById('reset-button').addEventListener('click', () => {
            if (confirm('Oyunu sÄ±fÄ±rlamak istediÄŸinizden emin misiniz?')) {
                localStorage.removeItem('theEquals_save');
                location.reload();
            }
        });
        
        // Lore tooltip iÃ§in event listener
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('lore-term')) {
                const term = e.target.textContent;
                const tooltips = {
                    'Zertan Ä°mparatorluÄŸu': 'KomÅŸu gÃ¼Ã§lÃ¼ imparatorluk. Devrimden endiÅŸeleniyor.',
                    'Eski Rejim': 'DevirdiÄŸiniz eski yÃ¶netim sistemi.',
                    'Elitler': 'Zengin ve gÃ¼Ã§lÃ¼ sÄ±nÄ±f. Devrimden Ã¶nce iktidardaydÄ±lar.',
                    'GerÃ§ek EÅŸitler': 'Yeni devrimci hareket. Sizin verdiÄŸiniz vaatleri istiyorlar.'
                };
                
                if (tooltips[term]) {
                    showLoreTooltip(tooltips[term], e.pageX, e.pageY);
                }
            } else {
                hideLoreTooltip();
            }
        });
        
        // Oyunu baÅŸlat
        startGame();

    </script>

</body>
</html>
